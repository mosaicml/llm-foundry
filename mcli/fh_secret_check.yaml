name: huggingface-api-key
compute:
  cluster: r1z1
  instance: cpu
image: mosaicml/pytorch
integrations:
  - integration_type: pip_packages
    packages:
      - huggingface-hub
command: |
  export hf_token=$HF_TOKEN
  echo "Checking if HF Token is set..."
  if [ -z "$hf_token" ]; then
    echo "Error: HF Token is empty"
    exit 1
  else
    echo "Logging in to Hugging Face..."
    huggingface-cli login --token $hf_token
    echo "Logged in. Running whoami to display the current user..."
    huggingface-cli whoami
  fi